<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>NFT Karakter Savaşı - Cyberpunk Edition</title>
    <!-- Tailwind CSS is loaded from a CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom fonts for the cyberpunk theme -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for consistent theming */
        :root {
            --neon-pink: #ff0080;
            --neon-cyan: #00ffff;
            --neon-purple: #8000ff;
            --neon-green: #00ff41;
            --neon-orange: #ff8000;
            --cyber-dark: #0a0a0a;
            --cyber-darker: #050505;
            --cyber-light: #1a1a1a;
            --cyber-grid: #333333;
        }

        /* Basic Resets and General Styles */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            color: #ffffff;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            background: none;
            display: flex;
            justify-content: center;
            align-items: center;
            /* Telegram Web App Safe Area Adjustments */
            padding-top: env(safe-area-inset-top, 20px);
            padding-bottom: env(safe-area-inset-bottom, 0px);
            padding-left: env(safe-area-inset-left, 0px);
            padding-right: env(safe-area-inset-right, 0px);
        }

        /* Cyber Background Effect */
        .cyber-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background-color: #0a0a0a;
            background-image: radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 1px, transparent 1px), radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.1) 1px, transparent 1px), radial-gradient(circle at 40% 50%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 100px 100px, 120px 120px, 80px 80px;
            background-repeat: repeat;
            animation: space-move 60s linear infinite;
        }

        @keyframes space-move {
            0% {
                background-position: 0 0, 0 0, 0 0;
            }
            100% {
                background-position: 1000px 1000px, 1200px 1200px, 800px 800px;
            }
        }

        /* Particle Effect */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffffff;
            border-radius: 50%;
            animation: star-flicker 2s infinite ease-in-out;
        }

        @keyframes star-flicker {
            0%, 100% {
                transform: translateY(0px) rotate(0deg) scale(1);
                opacity: 0;
            }
            25% {
                opacity: 0.8;
                transform: translateY(-20px) scale(1.1);
            }
            50% {
                opacity: 0.2;
                transform: translateY(-40px) scale(0.9);
            }
            75% {
                opacity: 1;
                transform: translateY(-60px) scale(1.2);
            }
            100% {
                transform: translateY(-80px) rotate(180deg) scale(1);
                opacity: 0;
            }
        }

        /* Game Container */
        .game-container {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.5) 0%, rgba(10, 10, 10, 0.6) 100%);
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.1), inset 0 0 20px rgba(0, 255, 255, 0.05);
            padding: 20px;
            margin: 80px auto 20px auto;
            max-width: 1200px;
            position: relative;
            backdrop-filter: blur(10px);
            display: none; /* Hidden initially */
            flex-direction: column;
            align-items: center;
            /* Ensure content respects safe areas within the container */
            padding-top: calc(20px + env(safe-area-inset-top, 0px));
            padding-bottom: calc(20px + env(safe-area-inset-bottom, 0px));
            padding-left: calc(20px + env(safe-area-inset-left, 0px));
            padding-right: calc(20px + env(safe-area-inset-right, 0px));
        }

        .game-container::before {
            content: none;
        }

        /* Game Title */
        .game-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
            margin-bottom: 30px;
            animation: title-pulse 2s ease-in-out infinite alternate;
        }

        @keyframes title-pulse {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(1.02);
            }
        }

        /* Main Game Content Layout */
        .main-game-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            width: 100%;
            margin-bottom: 30px;
        }

        .player-areas-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
            flex-grow: 1;
            width: 100%;
            max-width: 800px;
        }

        /* Player Areas */
        .player-area {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.4) 0%, rgba(10, 10, 10, 0.5) 100%);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            flex: 1;
            max-width: 450px;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2), inset 0 0 10px rgba(0, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        #player1-area {
            display: none;
        }

        #player2-area {
            border: none;
            box-shadow: none;
            background: none;
            padding: 0;
            max-width: 400px;
            margin-top: -90px;
        }

        .player-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .player-area:hover::before {
            left: 100%;
        }

        .current-player-glow {
            border-color: var(--neon-pink) !important;
            box-shadow: 0 0 30px rgba(255, 0, 128, 0.8), inset 0 0 30px rgba(255, 0, 128, 0.2);
            animation: current-player-pulse 1.5s ease-in-out infinite alternate;
        }

        @keyframes current-player-pulse {
            0% {
                box-shadow: 0 0 30px rgba(255, 0, 128, 0.8), inset 0 0 30px rgba(255, 0, 128, 0.2);
                transform: scale(1);
            }
            100% {
                transform: scale(1.02);
            }
        }

        /* Player Info (Top Section) */
        .player-info-top {
            width: 100%;
            text-align: center;
            margin-bottom: 10px;
        }

        .player-info-top h2 {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        /* HP Bar */
        .hp-bar-container {
            width: 80%;
            height: 20px;
            background: linear-gradient(135deg, #222, #111);
            border: 2px solid var(--neon-cyan);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 auto;
            position: relative;
        }

        .hp-bar {
            height: 100%;
            background: linear-gradient(45deg, var(--neon-green), #00ff80);
            border-radius: 8px;
            transition: width 0.8s ease-out;
            position: relative;
            animation: hp-glow 2s ease-in-out infinite alternate;
        }

        @keyframes hp-glow {
            0% {
                box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
            }
            100% {
                box-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
            }
        }

        .hp-bar.low-hp {
            background: linear-gradient(45deg, var(--neon-pink), #ff4080);
            animation: hp-danger 1s ease-in-out infinite alternate;
        }

        @keyframes hp-danger {
            0% {
                box-shadow: 0 0 10px rgba(255, 0, 128, 0.5);
            }
            100% {
                box-shadow: 0 0 25px rgba(255, 0, 128, 1);
            }
        }

        /* HP Overlay Text */
        .hp-overlay-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            font-size: 0.9rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }

        .hp-overlay-text .heart-icon {
            color: var(--neon-pink);
            font-size: 0.9em;
        }

        /* Character Card Visual */
        .character-card-visual {
            width: 280px;
            height: 380px;
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 3px solid var(--neon-purple);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            transition: transform 0.3s ease;
            flex-shrink: 0;
            flex-grow: 0;
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(128, 0, 255, 0.3), inset 0 0 10px rgba(128, 0, 255, 0.1);
        }

        .character-card-visual::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.2), transparent);
            animation: card-rotate 4s linear infinite;
            z-index: -1;
        }

        @keyframes card-rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .character-card-visual:hover {
            transform: scale(1.05);
        }

        .character-card-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            filter: brightness(1.1) contrast(1.2);
        }

        /* Character Info (Bottom Section) */
        .character-info-bottom {
            width: 100%;
            text-align: center;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(26, 26, 26, 0.8));
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--neon-cyan);
            margin-top: 10px;
        }

        .character-name {
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--neon-cyan);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            margin-bottom: 10px;
            animation: name-glow 2s ease-in-out infinite alternate;
        }

        @keyframes name-glow {
            0% {
                text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            }
            100% {
                text-shadow: 0 0 20px rgba(0, 255, 255, 1);
            }
        }

        .character-stats {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .character-stat-item {
            background: linear-gradient(45deg, rgba(0, 255, 255, 0.1), rgba(128, 0, 255, 0.1));
            border: 1px solid var(--neon-cyan);
            border-radius: 8px;
            padding: 5px 10px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .character-stat-item:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }

        .character-stat-value {
            color: var(--neon-green);
            font-weight: 700;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.8);
        }

        /* Game Messages */
        .game-messages {
            background: rgba(10, 10, 10, 0.5);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            font-family: 'Orbitron', monospace;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--neon-orange);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: -40px auto 20px auto;
            max-width: 80%;
            position: relative;
            overflow: hidden;
            text-shadow: 0 0 10px rgba(255, 128, 0, 0.8);
            border: 1px solid var(--neon-orange);
            z-index: 5;
        }

        .game-messages::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 128, 0, 0.00), transparent);
            animation: message-scan 3s ease-in-out infinite;
        }

        @keyframes message-scan {
            0%, 100% {
                left: -100%;
            }
            50% {
                left: 100%;
            }
        }

        /* Game Buttons Sidebar */
        .game-buttons-sidebar {
            display: flex;
            flex-direction: row;
            gap: 20px;
            padding: 20px;
            min-width: 180px;
            align-items: center;
            justify-content: center;
            margin-top: -60px;
            margin-bottom: 80px;
        }

        /* General Game Button Style */
        .game-button {
            font-family: 'Orbitron', monospace;
            color: white;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: auto;
            box-shadow: 0 5px 15px rgba(255, 0, 128, 0.3);
        }

        .game-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .game-button:hover::before {
            left: 100%;
        }

        .game-button:hover {
            transform: translateY(-3px);
            border-color: var(--neon-cyan);
        }

        .game-button:active {
            transform: translateY(0);
        }

        .game-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Attack Button */
        #attack-button {
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.3), rgba(204, 0, 102, 0.3));
            border: 2px solid rgba(255, 0, 128, 0.6);
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        #attack-button:hover {
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.7), 0 0 40px rgba(255, 0, 128, 0.5);
            border-color: rgba(255, 0, 128, 1);
            transform: translateY(-3px) scale(1.02);
        }

        /* Buff Button */
        #buff-button {
            background: linear-gradient(45deg, rgba(0, 255, 255, 0.3), rgba(0, 204, 204, 0.3));
            border: 2px solid rgba(0, 255, 255, 0.6);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        #buff-button:hover {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.7), 0 0 40px rgba(0, 255, 255, 0.5);
            border-color: rgba(0, 255, 255, 1);
            transform: translateY(-3px) scale(1.02);
        }

        /* Animations */
        @keyframes target-shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-8px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(8px);
            }
        }

        @keyframes target-hit-flash {
            0%, 100% {
                filter: brightness(1);
            }
            50% {
                filter: brightness(2) saturate(2) hue-rotate(300deg);
            }
        }

        .character-card-visual.hit {
            animation: target-shake 0.5s ease-in-out, target-hit-flash 0.4s ease-out;
        }

        @keyframes attacker-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 0, 128, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(255, 0, 128, 1);
            }
        }

        .character-card-visual.attacking {
            animation: attacker-glow 0.8s ease-in-out;
        }

        @keyframes buff-pulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(0, 255, 65, 0.6);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 40px rgba(0, 255, 65, 1);
                transform: scale(1.02);
            }
        }

        .character-card-visual.buffed-animation {
            animation: buff-pulse 1.5s ease-in-out infinite;
        }

        @keyframes winning-card-animation {
            0% {
                transform: scale(1);
                box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            }
            50% {
                transform: scale(1.08);
                box-shadow: 0 0 60px rgba(0, 255, 255, 1), inset 0 0 40px rgba(0, 255, 255, 0.6);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            }
        }

        .character-card-visual.winner-animation {
            animation: winning-card-animation 2s ease-in-out forwards;
        }

        /* Character Selection Screen */
        .character-selection-screen {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.5) 0%, rgba(10, 10, 10, 0.6) 100%), url('https://cdn.prod.website-files.com/67fb1cd83af51c4fe96dacb2/688a35914866d06a9c46dbc1_arena_bg.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border: 2px solid var(--neon-cyan);
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.3), inset 0 0 50px rgba(0, 255, 255, 0.1);
            padding: 30px;
            margin: 20px auto;
            max-width: 1000px;
            width: 90%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: relative;
            backdrop-filter: blur(10px);
            padding-top: calc(30px + env(safe-area-inset-top, 0px));
            padding-bottom: calc(30px + env(safe-area-inset-bottom, 0px));
            padding-left: calc(30px + env(safe-area-inset-left, 0px));
            padding-right: calc(30px + env(safe-area-inset-right, 0px));
        }

        .character-selection-screen h1 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
            margin-bottom: 20px;
        }

        .character-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            width: 100%;
            justify-content: center;
            padding: 10px;
        }

        .character-selection-card {
            background: linear-gradient(135deg, rgba(42, 42, 42, 0.5), rgba(26, 26, 26, 0.6)), url('https://cdn.prod.website-files.com/67fb1cd83af51c4fe96dacb2/688a617948ab6ad14813d2e4_arena_bgb.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border: 2px solid var(--neon-purple);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .character-selection-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .character-selection-card:hover::before {
            left: 100%;
        }

        .character-selection-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(128, 0, 255, 0.7);
            border-color: var(--neon-pink);
        }

        .character-selection-card.selected {
            border-color: var(--neon-green);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.9);
            transform: scale(1.03);
        }

        .character-selection-card img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            border: 1px solid var(--neon-cyan);
        }

        .character-selection-card h3 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--neon-cyan);
        }

        .character-selection-card p {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--neon-green);
            text-shadow: 0 0 8px rgba(0, 255, 65, 0.7);
        }

        .start-game-button-selection {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(45deg, #00cc66, #00aacc);
            color: white;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            border: 2px solid #009944;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            margin-top: 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }

        .start-game-button-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.5);
            border-color: var(--neon-purple);
        }

        .start-game-button-selection.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Battle Intro Screen */
        #battle-intro-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-out;
            border-radius: 20px;
        }

        #intro-player-card {
            width: 300px;
            height: 400px;
            transform: scale(0.8);
            opacity: 0;
            transition: transform 1s ease-out, opacity 1s ease-out;
            box-shadow: 0 0 50px rgba(128, 0, 255, 0.8), inset 0 0 30px rgba(128, 0, 255, 0.4);
            border-color: var(--neon-purple);
        }

        #intro-player-card img {
            filter: brightness(1.3) contrast(1.5) drop-shadow(0 0 15px rgba(128, 0, 255, 0.7));
        }

        #intro-player-name {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neon-pink);
            text-shadow: 0 0 20px rgba(255, 0, 128, 0.9);
            margin-top: 20px;
            opacity: 0;
            transition: opacity 0.8s ease-out 0.5s;
            text-align: center;
        }

        /* Newly Added Player Bar Styles */
        .player-bar {
            display: flex;
            align-items: center;
            background: linear-gradient(90deg, rgba(26, 26, 26, 0.8), rgba(10, 10, 10, 0.9));
            border-radius: 15px;
            padding: 10px 20px;
            margin-bottom: 20px;
            width: 90%;
            max-width: 600px;
            border: 2px solid var(--neon-purple);
            box-shadow: 0 0 15px rgba(128, 0, 255, 0.3), inset 0 0 10px rgba(128, 0, 255, 0.1);
            margin-top: 0;
        }

        .player-bar-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--neon-green);
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .player-bar-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-bar-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .player-bar-name {
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--neon-cyan);
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .player-bar-hp-container {
            width: 100%;
            height: 15px;
            background: linear-gradient(135deg, #222, #111);
            border: 1px solid var(--neon-green);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .player-bar-hp {
            height: 100%;
            background: linear-gradient(45deg, var(--neon-green), #00ff80);
            border-radius: 6px;
            transition: width 0.8s ease-out;
        }

        .player-bar-hp.low-hp {
            background: linear-gradient(45deg, var(--neon-pink), #ff4080);
        }

        .player-bar-hp-text {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--neon-green);
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.7);
            margin-left: 10px;
            flex-shrink: 0;
        }

        .player-bar-stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 5px;
            font-size: 0.8rem;
            font-weight: 600;
            color: #ffffff;
        }

        .player-bar-stat-item {
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 5px;
            padding: 2px 5px;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .player-bar-stat-value {
            color: var(--neon-green);
            font-weight: 700;
            text-shadow: 0 0 3px rgba(0, 255, 65, 0.7);
        }

        /* Item icons container for player bar */
        .player-bar-items {
            display: flex;
            gap: 8px;
            margin-left: 15px;
        }

        .player-bar-item-icon {
            width: 24px;
            height: 24px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--neon-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--neon-green);
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
        }

        /* Responsive Design (Mobile Friendly) */
        @media (max-width: 768px) {
            .game-container, .character-selection-screen {
                margin: 10px auto;
                padding: 10px;
                width: 98%;
                max-width: none;
            }

            .game-container {
                margin-top: 100px;
                margin-bottom: 10px;
            }

            .game-title, .character-selection-screen h1 {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }

            .main-game-content {
                flex-direction: column;
                align-items: center;
            }

            .player-areas-wrapper {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }

            .player-area, .character-card-visual {
                width: 95%;
                max-width: 350px;
            }

            .character-card-visual {
                height: 350px;
            }

            .game-messages {
                font-size: 1rem;
                padding: 15px;
                min-height: 60px;
            }

            .game-buttons-sidebar {
                flex-direction: column;
                gap: 15px;
                padding: 10px;
                margin-top: -40px;
            }

            .game-button {
                padding: 12px 20px;
                font-size: 1rem;
            }

            #player2-area {
                margin-top: -70px;
            }

            .player-bar {
                flex-direction: row;
                align-items: center;
                width: 98%;
            }

            .player-bar-info {
                flex-grow: 1;
            }

            .player-bar-stats {
                flex-wrap: wrap;
                justify-content: flex-start;
                gap: 5px;
            }

            .player-bar-stat-item {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body class="bg-gray-900 font-sans text-white">

    <!-- Cyberpunk Background and Particles -->
    <div class="cyber-background"></div>
    <div class="particles"></div>

    <!-- Main Game UI -->
    <div id="game-ui" class="w-full flex-grow flex items-center justify-center relative">

        <!-- Player Bar (Visible on mobile) -->
        <div id="player1-bar" class="player-bar absolute top-0 left-1/2 -translate-x-1/2 translate-y-10 z-10 w-[95%] sm:w-[500px]">
            <div class="player-bar-avatar">
                <img id="player1-avatar-bar" src="https://placehold.co/60x60/ff0080/ffffff?text=P1" alt="Player 1 Avatar">
            </div>
            <div class="player-bar-info">
                <div id="player1-name-bar" class="player-bar-name">Player 1</div>
                <div class="player-bar-hp-container">
                    <div id="player1-hp-bar-inner" class="player-bar-hp"></div>
                </div>
            </div>
            <div id="player1-hp-text" class="player-bar-hp-text">100 / 100 HP</div>
        </div>

        <!-- The game container holds the battle screen -->
        <div id="game-container" class="game-container">
            <h1 id="game-title" class="game-title">ARENA</h1>

            <div class="main-game-content">
                <!-- Player 1 and Player 2 areas -->
                <div class="player-areas-wrapper">

                    <!-- Player 1 Area (Hidden on mobile, only bar is shown) -->
                    <div id="player1-area" class="player-area current-player-glow">
                        <!-- Player info -->
                        <div class="player-info-top">
                            <h2 id="player1-name">Player 1</h2>
                            <!-- HP Bar -->
                            <div class="hp-bar-container">
                                <div id="player1-hp-fill" class="hp-bar" style="width: 100%;"></div>
                                <span id="player1-hp-text-full" class="hp-overlay-text">
                                    <span class="heart-icon">❤</span>
                                    <span id="player1-hp-value">100</span> / <span id="player1-max-hp">100</span>
                                </span>
                            </div>
                        </div>

                        <!-- Character Visual -->
                        <div id="player1-card-visual" class="character-card-visual">
                            <img id="player1-character-image" src="https://placehold.co/280x380/ff0080/ffffff?text=P1" alt="Player 1 Character">
                        </div>
                    </div>

                    <!-- Player 2 Area -->
                    <div id="player2-area" class="player-area">
                        <!-- Player info -->
                        <div class="player-info-top">
                            <h2 id="player2-name">Player 2</h2>
                            <!-- HP Bar -->
                            <div class="hp-bar-container">
                                <div id="player2-hp-fill" class="hp-bar" style="width: 100%;"></div>
                                <span id="player2-hp-text-full" class="hp-overlay-text">
                                    <span class="heart-icon">❤</span>
                                    <span id="player2-hp-value">100</span> / <span id="player2-max-hp">100</span>
                                </span>
                            </div>
                        </div>

                        <!-- Character Visual -->
                        <div id="player2-card-visual" class="character-card-visual">
                            <img id="player2-character-image" src="https://placehold.co/280x380/00ffff/000000?text=P2" alt="Player 2 Character">
                        </div>
                    </div>

                </div>

            </div>

            <!-- Game Messages/Log -->
            <div id="game-messages" class="game-messages">
                <span id="game-message-text">Cüzdanınızı bağlayın ve bir karakter seçin.</span>
            </div>

            <!-- Game Buttons -->
            <div id="game-buttons-sidebar" class="game-buttons-sidebar">
                <button id="attack-button" class="game-button">Attack</button>
                <button id="buff-button" class="game-button">Buff</button>
            </div>
        </div>
    </div>

    <!-- Battle Intro Screen -->
    <div id="battle-intro-screen">
        <h1 id="intro-player-name"></h1>
        <div id="intro-player-card" class="character-card-visual">
            <img id="intro-player-image" src="https://placehold.co/300x400/ff0080/ffffff?text=Loading" alt="Intro Character">
        </div>
    </div>

    <!-- Character Selection Screen -->
    <div id="character-selection-screen" class="character-selection-screen">
        <h1>NFT Karakterinizi Seçin</h1>
        <p class="text-gray-400">Sadece cüzdanınızdaki karakterler gösterilir.</p>
        <div id="character-grid" class="character-grid">
            <!-- Dynamic character cards will be inserted here by JavaScript -->
        </div>
        <button id="start-game-button" class="start-game-button-selection disabled" disabled>Savaşa Başla</button>
    </div>

    <!-- The Javascript logic is now included directly in the HTML file -->
    <script>
        // Partikül oluşturma fonksiyonu
        function createParticles() {
            const particles = document.querySelector('.particles');
            for (let i = 0; i < 100; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.animationDuration = (Math.random() * 1.5 + 1) + 's';
                particles.appendChild(particle);
            }
        }
        createParticles(); // Partikülleri başlat

        // Webhook URL'si (Make.com entegrasyonu için)
        const WEBHOOK_URL = "https://hook.eu2.make.com/5fqovqqnwl1ihdjnqsvywi6y325j7ma5";

        // Karakter sınıfı tanımı
        class Character {
            constructor(id, name, atk, def, initialHp, imageUrl, level, critChance) { // Level ve critChance eklendi
                this.id = id;
                this.name = name;
                this.baseAtk = atk;
                this.baseDef = def;
                this.currentHp = initialHp;
                this.maxHp = initialHp;
                this.imageUrl = imageUrl;
                this.level = level || 1; // Varsayılan level 1
                this.critChance = critChance || 20; // Varsayılan crit chance 20%
                this.buffActive = false; // Buff durumu
                this.buffTurns = 0;
            }

            // Saldırı gücünü hesapla
            get attackPower() {
                // Buff aktifse ATK iki katına çıkar
                return this.buffActive ? this.baseAtk * 2 : this.baseAtk;
            }

            // HP'yi azalt
            takeDamage(damage) {
                this.currentHp = Math.max(0, this.currentHp - damage);
            }

            // Buff'ı uygula
            applyBuff() {
                this.buffActive = true;
                this.buffTurns = 2; // 2 tur boyunca buff aktif kalır
                console.log(`${this.name} has been buffed!`);
            }

            // Buff durumunu güncelle
            updateBuff() {
                if (this.buffTurns > 0) {
                    this.buffTurns--;
                    if (this.buffTurns === 0) {
                        this.buffActive = false;
                        console.log(`${this.name}'s buff has expired.`);
                    }
                }
            }
        }

        // Oyun durumu değişkenleri
        let playerWalletAddress = null;
        let player1 = null;
        let player2 = null;
        let selectedCharacterId = null;
        let turn = 1; // 1: Player 1, 2: Player 2
        let opponent = null; // Opponent character data

        // DOM elementlerini al
        const gameContainer = document.getElementById('game-container');
        const selectionScreen = document.getElementById('character-selection-screen');
        const characterGrid = document.getElementById('character-grid');
        const startGameButton = document.getElementById('start-game-button');
        const gameMessageText = document.getElementById('game-message-text');
        const battleIntroScreen = document.getElementById('battle-intro-screen');

        // Player Bar DOM elements
        const player1Bar = document.getElementById('player1-bar');
        const player1AvatarBar = document.getElementById('player1-avatar-bar');
        const player1NameBar = document.getElementById('player1-name-bar');
        const player1HpBarInner = document.getElementById('player1-hp-bar-inner');
        const player1HpText = document.getElementById('player1-hp-text');

        // Player 1 Full Card DOM elements (will be hidden on mobile)
        const player1Area = document.getElementById('player1-area');
        const player1NameFull = document.getElementById('player1-name');
        const player1HpFill = document.getElementById('player1-hp-fill');
        const player1HpValue = document.getElementById('player1-hp-value');
        const player1MaxHp = document.getElementById('player1-max-hp');
        const player1CharacterImage = document.getElementById('player1-character-image');
        const player1StatsContainer = document.querySelector('#player1-area .character-stats');

        // Player 2 Full Card DOM elements
        const player2Name = document.getElementById('player2-name');
        const player2HpFill = document.getElementById('player2-hp-fill');
        const player2HpValue = document.getElementById('player2-hp-value');
        const player2MaxHp = document.getElementById('player2-max-hp');
        const player2CharacterImage = document.getElementById('player2-character-image');
        const player2StatsContainer = document.querySelector('#player2-area .character-stats');
        const player2CardVisual = document.getElementById('player2-card-visual');

        // Battle Buttons
        const attackButton = document.getElementById('attack-button');
        const buffButton = document.getElementById('buff-button');

        // Geçici karakter listesi (API'den gelmesi beklenir)
        const availableCharacters = [
            { id: 'char1', name: 'CyberBlade', atk: 25, def: 15, hp: 120, imageUrl: 'https://cdn.prod.website-files.com/67fb1cd83af51c4fe96dacb2/688a44b553641ce757b44778_card_visual_player_01.png', level: 5, critChance: 25 },
            { id: 'char2', name: 'Neon Samurai', atk: 30, def: 10, hp: 100, imageUrl: 'https://cdn.prod.website-files.com/67fb1cd83af51c4fe96dacb2/688a5c37021e64987f4c9c10_card_visual_player_02.png', level: 4, critChance: 30 },
            { id: 'char3', name: 'Data Ghost', atk: 20, def: 20, hp: 150, imageUrl: 'https://cdn.prod.website-files.com/67fb1cd83af51c4fe96dacb2/688a617948ab6ad14813d2e4_arena_bgb.png', level: 6, critChance: 15 },
        ];
        
        // Bu fonksiyon, karakter seçimi ekranını ve karakter kartlarını dinamik olarak oluşturur
        function populateCharacterSelection() {
            characterGrid.innerHTML = ''; // Önceki kartları temizle
            availableCharacters.forEach(character => {
                const card = document.createElement('div');
                card.classList.add('character-selection-card');
                card.dataset.id = character.id;
                card.innerHTML = `
                    <img src="${character.imageUrl}" alt="${character.name}">
                    <h3>${character.name}</h3>
                    <p>Level: ${character.level}</p>
                `;
                card.addEventListener('click', () => {
                    document.querySelectorAll('.character-selection-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    selectedCharacterId = character.id;
                    startGameButton.disabled = false;
                    startGameButton.classList.remove('disabled');
                });
                characterGrid.appendChild(card);
            });
        }
        
        // UI'yı güncelleyen temel fonksiyon (HP, isim, resim vb.)
        function updateUI() {
            // Player 1 UI (bar ve tam kart)
            if (player1) {
                // Player Bar için güncelleme
                player1NameBar.textContent = player1.name;
                player1AvatarBar.src = player1.imageUrl;
                const hpPercent = (player1.currentHp / player1.maxHp) * 100;
                player1HpBarInner.style.width = `${hpPercent}%`;
                player1HpText.textContent = `${player1.currentHp} / ${player1.maxHp} HP`;
                if (hpPercent <= 30) {
                    player1HpBarInner.classList.add('low-hp');
                } else {
                    player1HpBarInner.classList.remove('low-hp');
                }

                // Player 1'in tam kartı için güncelleme
                player1NameFull.textContent = player1.name;
                player1CharacterImage.src = player1.imageUrl;
                player1HpFill.style.width = `${hpPercent}%`;
                player1HpValue.textContent = player1.currentHp;
                player1MaxHp.textContent = player1.maxHp;
                if (hpPercent <= 30) {
                    player1HpFill.classList.add('low-hp');
                } else {
                    player1HpFill.classList.remove('low-hp');
                }

                // Dinamik istatistik güncelleme
                // Bu bölümü daha sonra API'den gelen gerçek verilere göre güncelleyebilirsiniz.
                // player1StatsContainer.innerHTML = `...`;
            }

            // Player 2 UI (rakip kartı)
            if (player2) {
                player2Name.textContent = player2.name;
                player2CharacterImage.src = player2.imageUrl;
                const hpPercent = (player2.currentHp / player2.maxHp) * 100;
                player2HpFill.style.width = `${hpPercent}%`;
                player2HpValue.textContent = player2.currentHp;
                player2MaxHp.textContent = player2.maxHp;
                if (hpPercent <= 30) {
                    player2HpFill.classList.add('low-hp');
                } else {
                    player2HpFill.classList.remove('low-hp');
                }
            }

            // Mesaj kutusunu güncelle
            gameMessageText.textContent = getMessageForTurn();

            // Sadece sıra sende iken butonları etkinleştir
            if (turn === 1) {
                attackButton.disabled = false;
                attackButton.classList.remove('disabled');
                buffButton.disabled = false;
                buffButton.classList.remove('disabled');
            } else {
                attackButton.disabled = true;
                attackButton.classList.add('disabled');
                buffButton.disabled = true;
                buffButton.classList.add('disabled');
            }
        }

        // Oyun mesajını belirleyen fonksiyon
        function getMessageForTurn() {
            if (player1 && player1.currentHp <= 0) {
                return `${player2.name} kazandı!`;
            }
            if (player2 && player2.currentHp <= 0) {
                return `${player1.name} kazandı!`;
            }
            if (turn === 1) {
                return `Sıra sende, ${player1.name}. Saldır veya güçlen!`;
            } else {
                return `Sıra ${player2.name}'de. O'nun hamlesini bekle.`;
            }
        }

        // Oyun akışını yöneten ana fonksiyon
        function initializeGame() {
            if (!playerWalletAddress) {
                console.error("Cüzdan adresi yok. Oyun başlatılamadı.");
                showMessage("Cüzdanınızı bağlayın.", "neon-orange");
                return;
            }

            showMessage("Karakterinizi seçin.", "neon-cyan");
            populateCharacterSelection();
            selectionScreen.style.display = 'flex';
        }

        // Oyun başladıktan sonra sahneyi ayarlayan fonksiyon
        function startBattle() {
            // Seçim ekranını gizle, oyun ekranını göster
            selectionScreen.style.display = 'none';
            gameContainer.style.display = 'flex';

            const playerCharacterData = availableCharacters.find(char => char.id === selectedCharacterId);
            const opponentCharacterData = availableCharacters.find(char => char.id !== selectedCharacterId);
            
            player1 = new Character(
                playerCharacterData.id,
                playerCharacterData.name,
                playerCharacterData.atk,
                playerCharacterData.def,
                playerCharacterData.hp,
                playerCharacterData.imageUrl,
                playerCharacterData.level,
                playerCharacterData.critChance
            );
            player2 = new Character(
                opponentCharacterData.id,
                opponentCharacterData.name,
                opponentCharacterData.atk,
                opponentCharacterData.def,
                opponentCharacterData.hp,
                opponentCharacterData.imageUrl,
                opponentCharacterData.level,
                opponentCharacterData.critChance
            );

            // Savaş başlangıç animasyonu
            showBattleIntro(player1.name, player1.imageUrl);
            setTimeout(() => {
                updateUI();
                checkWinner();
            }, 3000); // Intro animasyonu bittikten sonra UI'yı güncelle
        }

        function showBattleIntro(name, imageUrl) {
            const introName = document.getElementById('intro-player-name');
            const introImage = document.getElementById('intro-player-image');
            const introCard = document.getElementById('intro-player-card');

            introName.textContent = name;
            introImage.src = imageUrl;
            battleIntroScreen.style.opacity = 1;
            battleIntroScreen.style.pointerEvents = 'auto';

            setTimeout(() => {
                introCard.style.opacity = 1;
                introCard.style.transform = 'scale(1)';
                introName.style.opacity = 1;
            }, 500);

            setTimeout(() => {
                battleIntroScreen.style.opacity = 0;
                battleIntroScreen.style.pointerEvents = 'none';
            }, 2500);
        }
        
        // Mesaj gösterme fonksiyonu
        function showMessage(text, color) {
            const messageElement = document.getElementById('game-message-text');
            messageElement.textContent = text;
            messageElement.style.color = `var(--${color})`;
            messageElement.style.textShadow = `0 0 10px rgba(255, 128, 0, 0.8)`; // Or something dynamic
        }

        // Saldırı butonuna tıklama olayı
        attackButton.addEventListener('click', () => {
            if (turn === 1) {
                handlePlayerTurn(player1, player2);
            }
        });
        
        // Buff butonuna tıklama olayı
        buffButton.addEventListener('click', () => {
            if (turn === 1) {
                player1.applyBuff();
                showMessage(`${player1.name} kendini güçlendirdi!`);
                updateUI();
                endTurn();
            }
        });

        // Oyuncu turunu yönet
        function handlePlayerTurn(attacker, defender) {
            let damage = attacker.attackPower - defender.baseDef;
            damage = Math.max(1, damage); // Minimum 1 hasar
            
            // Kritik vuruş kontrolü
            if (Math.random() * 100 < attacker.critChance) {
                damage *= 2;
                showMessage(`${attacker.name} kritik vuruş yaptı! ${damage} hasar.`);
            } else {
                showMessage(`${attacker.name}, ${defender.name}'e ${damage} hasar verdi.`);
            }

            defender.takeDamage(damage);
            updateUI();
            
            // Animasyonları tetikle
            player1CharacterImage.classList.add('attacking');
            player2CardVisual.classList.add('hit');
            setTimeout(() => {
                player1CharacterImage.classList.remove('attacking');
                player2CardVisual.classList.remove('hit');
            }, 800);
            
            checkWinner();
            endTurn();
        }

        // Turu bitir
        function endTurn() {
            player1.updateBuff();
            player2.updateBuff();
            
            if (player1.currentHp > 0 && player2.currentHp > 0) {
                turn = turn === 1 ? 2 : 1;
                updateUI();
                if (turn === 2) {
                    setTimeout(handleOpponentTurn, 2000); // Rakip turunu başlat
                }
            }
        }
        
        // Rakip turunu yönet
        function handleOpponentTurn() {
            // Basit bir yapay zeka: Rastgele saldır veya buff yap
            const opponentAction = Math.random() > 0.5 && !player2.buffActive ? 'buff' : 'attack';
            
            if (opponentAction === 'buff') {
                player2.applyBuff();
                showMessage(`${player2.name} kendini güçlendiriyor!`);
                player2CardVisual.classList.add('buffed-animation');
                setTimeout(() => {
                    player2CardVisual.classList.remove('buffed-animation');
                    endTurn();
                }, 1500);
            } else {
                let damage = player2.attackPower - player1.baseDef;
                damage = Math.max(1, damage);
                
                if (Math.random() * 100 < player2.critChance) {
                    damage *= 2;
                    showMessage(`${player2.name} kritik vuruş yaptı! ${damage} hasar.`);
                } else {
                    showMessage(`${player2.name}, ${player1.name}'e ${damage} hasar verdi.`);
                }
                
                player1.takeDamage(damage);
                updateUI();

                // Animasyonları tetikle
                player2CardVisual.classList.add('attacking');
                player1Area.classList.add('hit'); // Player 1'in tam kartına animasyon ekle
                setTimeout(() => {
                    player2CardVisual.classList.remove('attacking');
                    player1Area.classList.remove('hit');
                    endTurn();
                }, 800);
            }
            checkWinner();
        }
        
        // Kazananı kontrol et
        function checkWinner() {
            if (player1.currentHp <= 0) {
                endGame(player2);
            } else if (player2.currentHp <= 0) {
                endGame(player1);
            }
        }

        // Oyun sonu
        function endGame(winner) {
            showMessage(`${winner.name} kazandı!`, "neon-green");
            
            // Kazanana animasyon ekle
            if (winner.id === player1.id) {
                player1Area.classList.add('winner-animation');
                // Mobil için de bar'a animasyon ekleyebiliriz
            } else {
                player2CardVisual.classList.add('winner-animation');
            }

            // Butonları devre dışı bırak
            attackButton.disabled = true;
            buffButton.disabled = true;
            attackButton.classList.add('disabled');
            buffButton.classList.add('disabled');
        }

        // Sayfa yüklendiğinde ve ekran boyutu değiştiğinde Player 1 barının görünürlüğünü yönet
        function managePlayer1UI() {
            const isMobile = window.innerWidth <= 768;
            if (isMobile) {
                player1Bar.style.display = 'flex';
                player1Area.style.display = 'none';
            } else {
                player1Bar.style.display = 'none';
                player1Area.style.display = 'flex';
            }
        }

        // `postMessage` ile cüzdan adresini dinle
        window.addEventListener('message', async (event) => {
            // Güvenlik: Mesajın beklenen kaynaktan geldiğini doğrulayın
            const allowedOrigins = [
                'https://cryptoyogi.webflow.io',
                'https://www.cryptoyogi.com',
                'https://yagizcanmutlu.github.io',
                'https://www.cryptoyogi.world'
            ];

            if (!allowedOrigins.includes(event.origin)) {
                console.warn('Güvenlik uyarısı: Bilinmeyen kaynaktan mesaj alındı!', event.origin);
                return;
            }

            if (event.data && event.data.type === 'walletAddress') {
                playerWalletAddress = event.data.address;
                // Cüzdan adresi alındıktan sonra oyunu başlat
                initializeGame();
            }
        });

        // Oyun butonları için olay dinleyicileri
        // Bu dinleyiciler, iframe içindeki butonlara bağlanır
        startGameButton.addEventListener('click', startBattle);

        // Pencere yüklendiğinde ve boyutu değiştiğinde UI yönetimini başlat
        window.onload = () => {
            managePlayer1UI();
            // Bu kısım, dışarıdan `postMessage` gelmiyorsa debug amaçlı kullanılabilir.
            // Eğer oyun dışarıdan başlatılmayacaksa, aşağıdaki satırı etkinleştirin.
            // initializeGame(); 
        };
        window.addEventListener('resize', managePlayer1UI);

    </script>
</body>
</html>
